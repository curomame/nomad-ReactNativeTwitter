(this.webpackJsonpnwitter=this.webpackJsonpnwitter||[]).push([[0],{45:function(e,t,n){"use strict";n.r(t);var r=n(10),c=n.n(r),a=n(35),s=n.n(a),i=n(11),u=n(27),j=n(12),o=n(0),b=n.n(o),l=n(2),O=n(36),d=n(20),p=n(15),f=n(23),h=Object(O.a)({apiKey:"AIzaSyCzyWExPtJiMTX3cDuKIe7PtR4MGBqfkA0",authDomain:"nwitter-d2857.firebaseapp.com",databaseURL:"https://nwitter-d2857-default-rtdb.firebaseio.com/",projectId:"nwitter-d2857",storageBucket:"nwitter-d2857.appspot.com",messagingSenderId:"95464545922",appId:"1:95464545922:web:8134efcfbf79fb67871e9b"}),x=Object(d.d)(h),m=Object(p.f)(),v=Object(f.c)(),g=n(7),w=function(){var e=Object(r.useState)(""),t=Object(i.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),s=Object(i.a)(a,2),u=s[0],j=s[1],o=Object(r.useState)(!0),O=Object(i.a)(o,2),p=O[0],f=O[1],h=Object(r.useState)(""),m=Object(i.a)(h,2),v=m[0],w=m[1],y=function(e){var t=e.target,n=t.name,r=t.value;"email"===n?c(r):"password"===n&&j(r)},k=function(){var e=Object(l.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!p){e.next=8;break}return e.next=5,Object(d.c)(x,n,u);case 5:e.sent,e.next=11;break;case 8:return e.next=10,Object(d.e)(x,n,u);case 10:e.sent;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),w(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("form",{onSubmit:k,children:[Object(g.jsx)("input",{onChange:y,name:"email",type:"email",placeholder:"email",required:!0,value:n}),Object(g.jsx)("input",{onChange:y,name:"password",type:"password",placeholder:"password",required:!0,value:u}),Object(g.jsx)("input",{type:"submit",value:p?"Create Account":"Log In"}),v,Object(g.jsx)("span",{onClick:function(){return f((function(e){return!e}))},children:p?"Sign in":"Create Account"})]})})},y=function(){var e=function(){var e=Object(l.a)(b.a.mark((function e(t){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"===(n=t.target.name)?r=new d.b:"github"===n&&(r=new d.a),e.next=4,Object(d.f)(x,r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)("div",{children:[Object(g.jsx)(w,{}),Object(g.jsxs)("div",{children:[Object(g.jsx)("button",{onClick:e,name:"google",children:"Continue with Google"}),Object(g.jsx)("button",{onClick:e,name:"github",children:"Continue with Github"})]})]})},k=n(37),C=function(e){var t=e.nweetObj,n=e.isOwner,c=Object(r.useState)(!1),a=Object(i.a)(c,2),s=a[0],u=a[1],j=Object(r.useState)(t.text),o=Object(i.a)(j,2),O=o[0],d=o[1],h=Object(p.d)(m,"nweets","".concat(t.id)),x=Object(f.d)(v,t.attachmentUrl),w=function(){var e=Object(l.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure?")){e.next=10;break}return e.t0=Object(p.c)(h),e.next=5,Object(f.a)(x);case 5:return e.t1=e.sent,e.next=8,e.t0.then.call(e.t0,e.t1);case 8:e.next=10;break;case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){return u((function(e){return!e}))},k=function(){var e=Object(l.a)(b.a.mark((function e(n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),console.log(t,O),e.next=4,Object(p.j)(h,{text:O});case 4:u(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)("div",{children:[s?Object(g.jsx)(g.Fragment,{children:n&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("form",{onSubmit:k,children:[Object(g.jsx)("input",{onChange:function(e){var t=e.target.value;d(t)},type:"text",placeholder:"edit your nweet",value:O,required:!0}),Object(g.jsx)("input",{type:"submit",value:"updated"})]}),Object(g.jsx)("button",{onClick:y,children:"Change"})]})}):Object(g.jsx)("h4",{children:t.text}),t.attachmentUrl&&Object(g.jsx)("img",{src:t.attachmentUrl,width:"50px",height:"50px",alt:"alt"}),n&&Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("button",{onClick:w,children:"Delete Nweet"}),Object(g.jsx)("button",{onClick:y,children:"Edit Nweet"})]})]})},S=n(47),N=function(e){var t=e.userObj,n=Object(r.useState)(""),c=Object(i.a)(n,2),a=c[0],s=c[1],u=Object(r.useState)(""),j=Object(i.a)(u,2),o=j[0],O=j[1],d=function(){var e=Object(l.a)(b.a.mark((function e(n){var r,c,i,u,j;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),r="",""===o){e.next=10;break}return c=Object(f.d)(v,"".concat(t.uid,"/").concat(Object(S.a)())),e.next=6,Object(f.e)(c,o,"data_url");case 6:return i=e.sent,e.next=9,Object(f.b)(i.ref);case 9:r=e.sent;case 10:return u={text:a,createdAt:Date.now(),creatorId:t.uid,attachmentUrl:r},e.prev=11,e.next=14,Object(p.a)(Object(p.b)(m,"nweets"),u);case 14:j=e.sent,console.log("Document written with ID: ",j.id),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(11),console.error("Error adding document: ",e.t0);case 21:s(""),O("");case 23:case"end":return e.stop()}}),e,null,[[11,18]])})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)("form",{onSubmit:d,children:[Object(g.jsx)("input",{value:a,onChange:function(e){var t=e.target.value;s(t)},type:"text",placeholder:"What's on your mind?",maxLength:120}),Object(g.jsx)("input",{type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0],n=new FileReader;n.onloadend=function(e){console.log(e);var t=e.currentTarget.result;O(t)},n.readAsDataURL(t)}}),Object(g.jsx)("input",{type:"submit",value:"Nweet"}),o&&Object(g.jsxs)("div",{children:[Object(g.jsx)("img",{src:o,width:"50px",height:"50px",alt:""}),Object(g.jsx)("button",{onClick:function(){return O(null)},children:"Clear Photo"})]})]})},I=function(e){var t=e.userObj,n=Object(r.useState)([]),c=Object(i.a)(n,2),a=c[0],s=c[1];return Object(r.useEffect)((function(){var e=Object(p.i)(Object(p.b)(m,"nweets"),Object(p.h)("createdAt","desc"));Object(p.g)(e,(function(e){var t=e.docs.map((function(e){return Object(k.a)({id:e.id},e.data())}));s(t)}))}),[]),Object(g.jsxs)("div",{children:[Object(g.jsx)(N,{userObj:t}),Object(g.jsx)("div",{children:a.map((function(e){return Object(g.jsx)(C,{nweetObj:e,isOwner:e.creatorId===t.uid},e.id)}))})]})},U=function(e){var t=e.refreshUser,n=e.userObj,c=Object(j.f)(),a=Object(r.useState)(n.displayName),s=Object(i.a)(a,2),u=s[0],o=s[1],O=function(){var e=Object(l.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(p.i)(Object(p.b)(m,"nweets"),Object(p.h)("createdAt","asc"),Object(p.k)("creatorId","==",n.uid)),e.next=3,Object(p.e)(t);case 3:e.sent.forEach((function(e){console.log(e.id," => ",e.data())}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){O()}),[]);var f=function(){var e=Object(l.a)(b.a.mark((function e(r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),n.displayName===u){e.next=5;break}return e.next=4,Object(d.g)(x.currentUser,{displayName:u});case 4:t();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("form",{onSubmit:f,children:[Object(g.jsx)("input",{onChange:function(e){var t=e.target.value;o(t)},type:"text",placeholder:"Display name",value:u}),Object(g.jsx)("input",{type:"submit",value:"Update Profile"})]}),Object(g.jsx)("button",{onClick:function(){x.signOut(),c("/")},children:"Log Out"})]})},D=function(e){var t=e.userObj;return Object(g.jsx)("nav",{children:Object(g.jsxs)("ul",{children:[Object(g.jsx)("li",{children:Object(g.jsx)(u.b,{to:"/",children:"Home"})}),Object(g.jsx)("li",{children:Object(g.jsxs)(u.b,{to:"/profile",children:[t.displayName,"'s' Profile"]})})]})})},A=function(e){var t=e.refreshUser,n=e.isLoggedIn,r=e.userObj;return Object(g.jsxs)(u.a,{children:[n&&Object(g.jsx)(D,{userObj:r}),Object(g.jsx)(j.c,{children:n?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(j.a,{exact:!0,path:"/",element:Object(g.jsx)(I,{userObj:r})}),Object(g.jsx)(j.a,{exact:!0,path:"/profile",element:Object(g.jsx)(U,{userObj:r,refreshUser:t})})]}):Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(j.a,{exact:!0,path:"/",element:Object(g.jsx)(y,{})})})})]})};var F=function(){var e=Object(r.useState)(!1),t=Object(i.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(null),s=Object(i.a)(a,2),u=s[0],j=s[1];return Object(r.useEffect)((function(){x.onAuthStateChanged((function(e){j(e?{displayName:e.displayName,uid:e.uid,updateProfile:function(t){return Object(d.g)(e,{displayName:e.displayName})}}:null),c(!0)}))}),[]),Object(g.jsx)(g.Fragment,{children:n?Object(g.jsx)(A,{refreshUser:function(){var e=x.currentUser;console.log(x.currentUser),j({displayName:e.displayName,uid:e.uid,updateProfile:function(t){return Object(d.g)(e,{displayName:e.displayName})}})},isLoggedIn:Boolean(u),userObj:u}):"Initializing..."})};s.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(F,{})}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.9a025932.chunk.js.map